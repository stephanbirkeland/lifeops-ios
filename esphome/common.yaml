# Common ESPHome configuration included by all sensors
# This file contains shared settings for WiFi, API, OTA, and logging

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password
  fast_connect: true

  # Fallback hotspot in case WiFi fails
  ap:
    ssid: "${device_name} Fallback"
    password: !secret fallback_ap_password

captive_portal:

api:
  encryption:
    key: !secret api_encryption_key

ota:
  platform: esphome
  password: !secret ota_password

logger:
  level: WARN
  baud_rate: 0  # Disable serial logging to save power

# Common sensors for all devices
sensor:
  - platform: wifi_signal
    name: "${friendly_name} WiFi Signal"
    update_interval: 60s
    entity_category: diagnostic

  - platform: uptime
    name: "${friendly_name} Uptime"
    entity_category: diagnostic

text_sensor:
  - platform: wifi_info
    ip_address:
      name: "${friendly_name} IP Address"
      entity_category: diagnostic

button:
  - platform: restart
    name: "${friendly_name} Restart"
    entity_category: config
